<% layout('/layouts/mainTemplate') %>

<div class="d-flex justify-content-center">
  <h1
    class="
      display-6
      d-inline-block
      fw-bold
      border-bottom border-5 border-success
      lh-base
    "
  >
    Registrace
  </h1>
</div>

<div class="row mt-3 mb-5">
  <div class="col-md-8 offset-md-2 col-lg-6 offset-lg-3">
    <p class="lh-lg text-center mb-4">
      Pro účast v anketě je třeba se zaregistrovat, aktivovat svůj účet a přihlásit se.
    </p>
    <div class="card shadow">
      <img
        src="/img/hole.jpg"
        alt="Jamka Roku 2021"
        class="card-img-top"
      />

      <div class="card-body">
        <form
          action="/users/register"
          method="POST"
          class="validated-form"
          novalidate
        >
          <div class="mb-3">
            <label for="username" class="form-label fw-bold"
              >Uživatelské jméno</label
            >
            <input type="text" class="form-control <%= errors.find(e => e.param
            === "username") ? "is-invalid" : "" %>" id="username"
            aria-describedby="usernameHelp" placeholder="nominátor"
            name="username" required autofocus value="<%= username ? username :
            '' %>" />
            <div id="usernameHelp" class="form-text">
              Smí obsahovat pouze písmena a čísla. Tvé uživatelské jméno se bude zobrazovat v komentářové sekci.
            </div>
            <div class="invalid-feedback">
              <% if (errors.find(e => e.param === 'username')) { %> <%=
              errors.filter(e => e.param === 'username')[0].msg %> <% } else {
              %> Prosím, zvolte si uživatelské jméno. <% } %>
            </div>
            <div class="valid-feedback">V pořádku!</div>
          </div>
          <div class="mb-3">
            <label for="email" class="form-label fw-bold">Email</label>
            <input type="email" class="form-control <%= errors.find(e => e.param
            === "email") ? "is-invalid" : "" %>" id="email" name="email"
            aria-describedby="emailHelp" placeholder="tvuj@email.cz" required
            value="<%= email ? email : '' %>" />
            <div id="emailHelp" class="form-text">
              Emailová adresa bude použita pro ověření tvého účtu a nebude veřejně sdílena.
            </div>
            <div class="invalid-feedback">
              <% if (errors.find(e => e.param === 'email')) { %> <%=
              errors.filter(e => e.param === 'email')[0].msg %> <% } else { %>
              Prosím, zadej svou emailovou adresu. <% } %>
            </div>
            <div class="valid-feedback">V pořádku!</div>
          </div>
          <div class="mb-3">
            <label for="password" class="form-label fw-bold">Heslo</label>
            <input type="password" class="form-control <%= errors.find(e =>
            e.param === "password") ? "is-invalid" : "" %>" id="password"
            name="password" required />
            <div id="passwordHelp" class="form-text">
              Heslo musí mít alespoň 5 znaků.
            </div>
            <div class="invalid-feedback">
              <% if (errors.find(e => e.param === 'password')) { %> <%=
              errors.filter(e => e.param === 'password')[0].msg %> <% } else {
              %> Prosím, zvolte si heslo s minimalne 5 znaky. <% } %>
            </div>
          </div>
          <div class="mb-3">
            <label for="passwordConfirmation" class="form-label fw-bold"
              >Potvrdit heslo</label>
            <input type="password" class="form-control <%= errors.find(e =>
            e.param === "passwordConfirmation") ? "is-invalid" : "" %>"
            id="passwordConfirmation" name="passwordConfirmation" required />
            <div class="invalid-feedback">
              <% if (errors.find(e => e.param === 'passwordConfirmation')) { %>
              <%= errors.filter(e => e.param === 'passwordConfirmation')[0].msg
              %> <% } else { %> Prosím, potvrď své heslo. <% } %>
            </div>
          </div>
          <div class="mb-3">
            <div class="form-check">
              <input
                class="form-check-input"
                type="checkbox"
                id="invalidCheck"
                name="terms"
                required
              />
              <label class="form-check-label" for="invalidCheck">
                Souhlasím se <a class="link-success" href="/terms">soutěžními podmínkami a zásadami ochrany osobních údajů</a>.
              </label>
              <div class="invalid-feedback">
                Musíš souhlasit se soutěžními podmínkami.
              </div>
            </div>
          </div>
          <button type="submit" class="btn btn-success w-100">
            Registrovat se
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
<script src="/js/validateForm.js"></script>
